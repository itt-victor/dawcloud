/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./resources/ts/ui/draw_worker.ts":
/*!****************************************!*\
  !*** ./resources/ts/ui/draw_worker.ts ***!
  \****************************************/
/***/ (() => {

eval("\n/* import { audioCtx } from '../app_core';\r\n\r\n\r\n//audiobuffer\r\nconst drawRecording = async (arraybuffers: Array<ArrayBuffer>, zoom: number, selected: boolean) => {\r\n\r\n    let audioBufferL = await audioCtx.decodeAudioData(arraybuffers[0]);\r\n    let audioBufferR;\r\n\r\n    if (arraybuffers.length == 2) audioBufferR = await audioCtx.decodeAudioData(arraybuffers[1]);\r\n\r\n    let width = audioBufferL.duration * (zoom + 0.15), //Ese 0.15 corrige descompensaci√≥n\r\n        height = 58;\r\n    const offCanvas = new OffscreenCanvas(width, height);\r\n    offCanvas.width = audioBufferL.duration * zoom;\r\n    offCanvas.height = height;\r\n    const canvasCtx = offCanvas.getContext('2d') as OffscreenCanvasRenderingContext2D;\r\n\r\n    canvasCtx.fillStyle = selected ? '#20453a' : '#2ed9a5';\r\n    canvasCtx.beginPath();\r\n    canvasCtx.moveTo(0, 0);\r\n    canvasCtx.lineTo(width, 0);\r\n    canvasCtx.lineTo(width, 58);\r\n    canvasCtx.lineTo(0, 58);\r\n    canvasCtx.fill();\r\n    canvasCtx.closePath()\r\n    canvasCtx.strokeStyle = '#380166';\r\n    canvasCtx.lineWidth = 2;\r\n    canvasCtx.strokeRect(0, 0, width - 2, height);\r\n    canvasCtx.fillStyle = selected ? '#2ed9a5' : '#20453a';\r\n\r\n    if (arraybuffers.length == 2) {  //si es estereo..\r\n        const dataL = audioBufferL.getChannelData(0);\r\n        const stepL = Math.ceil(dataL.length / width);\r\n        const amp = height / 4;\r\n        for (let i = 0; i < width; i++) {\r\n            let min = 1.0;\r\n            let max = -1.0;\r\n            for (let j = 0; j < stepL; j++) {\r\n                const datum = dataL[(i * stepL) + j];\r\n                if (datum < min) min = datum;\r\n                if (datum > max) max = datum;\r\n            }\r\n            canvasCtx.fillRect(i, (1 + min) * amp, 1, Math.max(1, (max - min) * amp));\r\n        }\r\n        const dataR = (audioBufferR as AudioBuffer).getChannelData(1);\r\n        const stepR = Math.ceil(dataR.length / width);\r\n        for (let i = 0; i < width; i++) {\r\n            let min = 1.0;\r\n            let max = -1.0;\r\n            for (let j = 0; j < stepR; j++) {\r\n                const datum = dataR[(i * stepR) + j];\r\n                if (datum < min)\r\n                    min = datum;\r\n                if (datum > max)\r\n                    max = datum;\r\n            }\r\n            canvasCtx.fillRect(i, (1 + min) * amp + height / 2, 1, Math.max(1, (max - min) * amp));\r\n        }\r\n    } else if (arraybuffers.length == 1) {  // si es mono..\r\n        const data = audioBufferL.getChannelData(0);\r\n        const step = Math.ceil(data.length / width);\r\n        const amp = height / 2;\r\n        for (let i = 0; i < width; i++) {\r\n            let min = 1.0;\r\n            let max = -1.0;\r\n            for (let j = 0; j < step; j++) {\r\n                const datum = data[(i * step) + j];\r\n                if (datum < min)\r\n                    min = datum;\r\n                if (datum > max)\r\n                    max = datum;\r\n            }\r\n            canvasCtx.fillRect(i, (1 + min) * amp, 1, Math.max(1, (max - min) * amp));\r\n        }\r\n    }\r\n    return offCanvas;\r\n}\r\n\r\nonmessage = async e => {\r\n    const offcanvas = await drawRecording(e.data[0], e.data[1], e.data[2]);\r\n    postMessage(offcanvas, '*');\r\n}\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvdHMvdWkvZHJhd193b3JrZXIudHM/M2M1MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL3Jlc291cmNlcy90cy91aS9kcmF3X3dvcmtlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG4vKiBpbXBvcnQgeyBhdWRpb0N0eCB9IGZyb20gJy4uL2FwcF9jb3JlJztcclxuXHJcblxyXG4vL2F1ZGlvYnVmZmVyXHJcbmNvbnN0IGRyYXdSZWNvcmRpbmcgPSBhc3luYyAoYXJyYXlidWZmZXJzOiBBcnJheTxBcnJheUJ1ZmZlcj4sIHpvb206IG51bWJlciwgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHtcclxuXHJcbiAgICBsZXQgYXVkaW9CdWZmZXJMID0gYXdhaXQgYXVkaW9DdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyc1swXSk7XHJcbiAgICBsZXQgYXVkaW9CdWZmZXJSO1xyXG5cclxuICAgIGlmIChhcnJheWJ1ZmZlcnMubGVuZ3RoID09IDIpIGF1ZGlvQnVmZmVyUiA9IGF3YWl0IGF1ZGlvQ3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlcnNbMV0pO1xyXG5cclxuICAgIGxldCB3aWR0aCA9IGF1ZGlvQnVmZmVyTC5kdXJhdGlvbiAqICh6b29tICsgMC4xNSksIC8vRXNlIDAuMTUgY29ycmlnZSBkZXNjb21wZW5zYWNpw7NuXHJcbiAgICAgICAgaGVpZ2h0ID0gNTg7XHJcbiAgICBjb25zdCBvZmZDYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgb2ZmQ2FudmFzLndpZHRoID0gYXVkaW9CdWZmZXJMLmR1cmF0aW9uICogem9vbTtcclxuICAgIG9mZkNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBjb25zdCBjYW52YXNDdHggPSBvZmZDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgY2FudmFzQ3R4LmZpbGxTdHlsZSA9IHNlbGVjdGVkID8gJyMyMDQ1M2EnIDogJyMyZWQ5YTUnO1xyXG4gICAgY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY2FudmFzQ3R4Lm1vdmVUbygwLCAwKTtcclxuICAgIGNhbnZhc0N0eC5saW5lVG8od2lkdGgsIDApO1xyXG4gICAgY2FudmFzQ3R4LmxpbmVUbyh3aWR0aCwgNTgpO1xyXG4gICAgY2FudmFzQ3R4LmxpbmVUbygwLCA1OCk7XHJcbiAgICBjYW52YXNDdHguZmlsbCgpO1xyXG4gICAgY2FudmFzQ3R4LmNsb3NlUGF0aCgpXHJcbiAgICBjYW52YXNDdHguc3Ryb2tlU3R5bGUgPSAnIzM4MDE2Nic7XHJcbiAgICBjYW52YXNDdHgubGluZVdpZHRoID0gMjtcclxuICAgIGNhbnZhc0N0eC5zdHJva2VSZWN0KDAsIDAsIHdpZHRoIC0gMiwgaGVpZ2h0KTtcclxuICAgIGNhbnZhc0N0eC5maWxsU3R5bGUgPSBzZWxlY3RlZCA/ICcjMmVkOWE1JyA6ICcjMjA0NTNhJztcclxuXHJcbiAgICBpZiAoYXJyYXlidWZmZXJzLmxlbmd0aCA9PSAyKSB7ICAvL3NpIGVzIGVzdGVyZW8uLlxyXG4gICAgICAgIGNvbnN0IGRhdGFMID0gYXVkaW9CdWZmZXJMLmdldENoYW5uZWxEYXRhKDApO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBMID0gTWF0aC5jZWlsKGRhdGFMLmxlbmd0aCAvIHdpZHRoKTtcclxuICAgICAgICBjb25zdCBhbXAgPSBoZWlnaHQgLyA0O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2lkdGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbWluID0gMS4wO1xyXG4gICAgICAgICAgICBsZXQgbWF4ID0gLTEuMDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzdGVwTDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXR1bSA9IGRhdGFMWyhpICogc3RlcEwpICsgal07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0dW0gPCBtaW4pIG1pbiA9IGRhdHVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdHVtID4gbWF4KSBtYXggPSBkYXR1bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYW52YXNDdHguZmlsbFJlY3QoaSwgKDEgKyBtaW4pICogYW1wLCAxLCBNYXRoLm1heCgxLCAobWF4IC0gbWluKSAqIGFtcCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRhUiA9IChhdWRpb0J1ZmZlclIgYXMgQXVkaW9CdWZmZXIpLmdldENoYW5uZWxEYXRhKDEpO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBSID0gTWF0aC5jZWlsKGRhdGFSLmxlbmd0aCAvIHdpZHRoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdpZHRoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IG1pbiA9IDEuMDtcclxuICAgICAgICAgICAgbGV0IG1heCA9IC0xLjA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RlcFI7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0dW0gPSBkYXRhUlsoaSAqIHN0ZXBSKSArIGpdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdHVtIDwgbWluKVxyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGRhdHVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdHVtID4gbWF4KVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGRhdHVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbnZhc0N0eC5maWxsUmVjdChpLCAoMSArIG1pbikgKiBhbXAgKyBoZWlnaHQgLyAyLCAxLCBNYXRoLm1heCgxLCAobWF4IC0gbWluKSAqIGFtcCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYXJyYXlidWZmZXJzLmxlbmd0aCA9PSAxKSB7ICAvLyBzaSBlcyBtb25vLi5cclxuICAgICAgICBjb25zdCBkYXRhID0gYXVkaW9CdWZmZXJMLmdldENoYW5uZWxEYXRhKDApO1xyXG4gICAgICAgIGNvbnN0IHN0ZXAgPSBNYXRoLmNlaWwoZGF0YS5sZW5ndGggLyB3aWR0aCk7XHJcbiAgICAgICAgY29uc3QgYW1wID0gaGVpZ2h0IC8gMjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdpZHRoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IG1pbiA9IDEuMDtcclxuICAgICAgICAgICAgbGV0IG1heCA9IC0xLjA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RlcDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXR1bSA9IGRhdGFbKGkgKiBzdGVwKSArIGpdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdHVtIDwgbWluKVxyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGRhdHVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdHVtID4gbWF4KVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGRhdHVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbnZhc0N0eC5maWxsUmVjdChpLCAoMSArIG1pbikgKiBhbXAsIDEsIE1hdGgubWF4KDEsIChtYXggLSBtaW4pICogYW1wKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9mZkNhbnZhcztcclxufVxyXG5cclxub25tZXNzYWdlID0gYXN5bmMgZSA9PiB7XHJcbiAgICBjb25zdCBvZmZjYW52YXMgPSBhd2FpdCBkcmF3UmVjb3JkaW5nKGUuZGF0YVswXSwgZS5kYXRhWzFdLCBlLmRhdGFbMl0pO1xyXG4gICAgcG9zdE1lc3NhZ2Uob2ZmY2FudmFzLCAnKicpO1xyXG59XHJcbiAqL1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./resources/ts/ui/draw_worker.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./resources/ts/ui/draw_worker.ts"]();
/******/ 	
/******/ })()
;